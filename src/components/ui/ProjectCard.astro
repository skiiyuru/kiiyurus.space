---
// astro tools
import { Icon } from "astro-icon/components"
import { getEntries } from "astro:content"
import { Image } from "astro:assets"

// types
import type { CollectionEntry } from "astro:content"

// components
import Heading from "@/components/ui/Heading.astro"

type Props = {
  data: CollectionEntry<"projects">["data"]
}

const { data } = Astro.props

const { title, url, icons, thumbnail } = data

const iconData = await getEntries(icons)
---

<article aria-label={title} class="hover:shadow-lg">
  <a href={url}>
    <Image
      src={thumbnail}
      class={"max-h-48"}
      alt={title}
      format="avif"
      inferSize
    />
    <div class="grid grid-cols-3 items-center p-4 border border-t-0 text-start">
      <Heading classes="col-span-2" tagName="h3">{title}</Heading>

      <ul class="flex gap-2 justify-end col-span-1">
        {
          iconData.map(({ data }) => (
            <li>
              <Icon name={data.icon} title={data.icon} aria-label={data.icon} />
            </li>
          ))
        }
      </ul>
    </div>
  </a>
</article>
